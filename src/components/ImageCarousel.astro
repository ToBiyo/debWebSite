---
const { images } = Astro.props;
import { Icon } from "astro-icon/components";

const loopedImages = [images[images.length - 1], ...images, images[0]];
---

<!-- 
?come deve funzionare
scorrimento immagini via bottoni avanti/indietro
punti sotto lo slider che indica quale immagini si sta visualizzando
-->
<div class="flex flex-col gap-2">
  <div class="flex gap-2 items-center">
    <button id="button-left" class="hidden lg:flex text-4xl cursor-pointer"
      ><Icon name="mdi:chevron-left" /></button
    >
    <div
      id="slider"
      class="w-full overflow-hidden relative md:max-w-[680px] lg:w-full mx-auto"
    >
      <div
        id="slides"
        class="flex transition-transform duration-1000 ease-in-out relative w-full md:w-[680px] xl:w-full"
        style="transform: translateX(-100%);"
      >
        {
          loopedImages.map((image) => (
            <img
              src={image.src}
              alt="carousel image"
              class="w-full h-full slide"
            />
          ))
        }
      </div>
    </div>
    <button id="button-right" class="hidden lg:flex text-4xl cursor-pointer"
      ><Icon name="mdi:chevron-right" /></button
    >
  </div>
  <div class="flex items-center justify-center gap-2 mt-4">
    {
      images.map((image: any, i: number) =>
        i === 0 ? (
          <div class="h-3 w-3 rounded-full bg-gray-700 navigators cursor-pointer" />
        ) : (
          <div class="h-3 w-3 rounded-full bg-gray-400 navigators cursor-pointer" />
        )
      )
    }
  </div>
</div>

<script>
  import Slider from "../utilities/Slider.js";

  window.addEventListener("DOMContentLoaded", () => {
    const slidesContainer = document.getElementById("slides");
    const slidesLength = document.getElementsByClassName("slide").length;
    const buttonLeft = document.getElementById("button-left");
    const buttonRight = document.getElementById("button-right");
    const dotNavigators = document.getElementsByClassName("navigators");

    if (!slidesContainer || slidesLength === 0 || !buttonLeft || !buttonRight)
      return;

    const aboutSlider = new Slider(
      slidesContainer,
      slidesLength,
      buttonLeft,
      buttonRight,
      dotNavigators
    );
  });
</script>
